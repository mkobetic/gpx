
<svg version="1.1" xmlns="http://www.w3.org/2000/svg"
    width="100%" height="100%" id="root">
    <style type="text/css" >
        <![CDATA[
.segment { fill: none; stroke-width: 4 }
.segment:hover { stroke-width: 8 }
.segment-hovered { stroke-width: 8 }
.timeline-segment { fill: blue; fill-opacity: 30%; stroke: blue }
.timeline-segment-rect { fill: transparent }
.timeline-segment-rect:hover { stroke-width: 2; stroke: black }
.timeline-segment-rect-hovered { stroke-width: 2; stroke: black }
        ]]>
    </style>
    <g id="legend">
        
        <rect x="0" y="0" width="30" height="20" fill="#00f"/>
        
        <rect x="30" y="0" width="30" height="20" fill="#02f"/>
        
        <rect x="60" y="0" width="30" height="20" fill="#04f"/>
        
        <rect x="90" y="0" width="30" height="20" fill="#06f"/>
        
        <rect x="120" y="0" width="30" height="20" fill="#08f"/>
        
        <rect x="150" y="0" width="30" height="20" fill="#0af"/>
        
        <rect x="180" y="0" width="30" height="20" fill="#0cf"/>
        
        <rect x="210" y="0" width="30" height="20" fill="#0ef"/>
        
        <rect x="240" y="0" width="30" height="20" fill="#0ff"/>
        
        <rect x="270" y="0" width="30" height="20" fill="#0fb"/>
        
        <rect x="300" y="0" width="30" height="20" fill="#0f7"/>
        
        <rect x="330" y="0" width="30" height="20" fill="#0f3"/>
        
        <rect x="360" y="0" width="30" height="20" fill="#0f0"/>
        
        <rect x="390" y="0" width="30" height="20" fill="#4f0"/>
        
        <rect x="420" y="0" width="30" height="20" fill="#8f0"/>
        
        <rect x="450" y="0" width="30" height="20" fill="#cf0"/>
        
        <rect x="480" y="0" width="30" height="20" fill="#ff0"/>
        
        <rect x="510" y="0" width="30" height="20" fill="#fd0"/>
        
        <rect x="540" y="0" width="30" height="20" fill="#fb0"/>
        
        <rect x="570" y="0" width="30" height="20" fill="#f90"/>
        
        <rect x="600" y="0" width="30" height="20" fill="#f70"/>
        
        <rect x="630" y="0" width="30" height="20" fill="#f50"/>
        
        <rect x="660" y="0" width="30" height="20" fill="#f30"/>
        
        <rect x="690" y="0" width="30" height="20" fill="#f10"/>
        
        
        <text x="5" y="16" fill="white">0kts</text>
        
        <text x="155" y="16" fill="black">5kts</text>
        
        <text x="305" y="16" fill="black">10kts</text>
        
        <text x="455" y="16" fill="black">15kts</text>
        
        <text x="605" y="16" fill="black">20kts</text>
        
    </g>
    <svg id="map" x="0" y="21" width="100%" viewBox="0 0 264.1904202277424 1155.481751928165">
        <!-- Invisible rectangle covering the whole viewport is needed so that mouse events are captured
            by the #map element whenever the mouse pointer is anywhere in the viewport -->
        <rect id="background" width="264.1904202277424" height="1155.481751928165" fill="transparent"/>
    
        <g class="segment" id="s0">
            
            
            <line class="step" x1="49" y1="1127" x2="57" y2="1102" stroke="#0ff">
            <title>18:29:07: 31.1m @ 8.6 kts ↑ 19° NNE = 0.02 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="57" y1="1102" x2="66" y2="1075" stroke="#0ff">
            <title>18:29:15: 33.6m @ 8.1 kts ↑ 19° NNE = 0.03 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="66" y1="1075" x2="73" y2="1050" stroke="#0ef">
            <title>18:29:23: 29.8m @ 7.2 kts ↑ 17° NNE = 0.05 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="73" y1="1050" x2="78" y2="1033" stroke="#0af">
            <title>18:29:30: 20.9m @ 5.8 kts ↑ 16° NNE = 0.06 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="78" y1="1033" x2="81" y2="1012" stroke="#0af">
            <title>18:29:39: 25.0m @ 5.4 kts ↑ 8° N = 0.08 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="81" y1="1012" x2="84" y2="988" stroke="#0af">
            <title>18:29:48: 27.2m @ 5.9 kts ↑ 7° N = 0.09 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="84" y1="988" x2="88" y2="963" stroke="#0af">
            <title>18:29:58: 29.7m @ 5.8 kts ↑ 10° N = 0.11 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="88" y1="963" x2="92" y2="940" stroke="#0af">
            <title>18:30:08: 28.4m @ 5.5 kts ↑ 10° N = 0.12 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="92" y1="940" x2="96" y2="919" stroke="#0af">
            <title>18:30:17: 24.6m @ 5.3 kts ↑ 9° N = 0.14 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="96" y1="919" x2="100" y2="897" stroke="#0af">
            <title>18:30:26: 25.8m @ 5.6 kts ↑ 11° N = 0.15 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="100" y1="897" x2="103" y2="873" stroke="#0af">
            <title>18:30:36: 28.7m @ 5.6 kts ↑ 9° N = 0.16 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="103" y1="873" x2="106" y2="855" stroke="#08f">
            <title>18:30:45: 20.6m @ 4.4 kts ↑ 8° N = 0.18 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="106" y1="855" x2="108" y2="841" stroke="#06f">
            <title>18:30:54: 17.0m @ 3.7 kts ↑ 8° N = 0.18 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="108" y1="841" x2="109" y2="828" stroke="#06f">
            <title>18:31:03: 14.5m @ 3.1 kts ↑ 7° N = 0.19 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="109" y1="828" x2="110" y2="818" stroke="#04f">
            <title>18:31:12: 12.1m @ 2.6 kts ↑ 2° N = 0.20 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="818" x2="110" y2="810" stroke="#04f">
            <title>18:31:18: 8.8m @ 2.9 kts ↑ 7° N = 0.20 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="810" x2="110" y2="793" stroke="#06f">
            <title>18:31:30: 20.8m @ 3.4 kts ↑ 358° N = 0.22 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="793" x2="110" y2="781" stroke="#04f">
            <title>18:31:39: 13.4m @ 2.9 kts ↑ 1° N = 0.22 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="781" x2="110" y2="768" stroke="#04f">
            <title>18:31:49: 14.8m @ 2.9 kts ↑ 1° N = 0.23 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="768" x2="111" y2="760" stroke="#04f">
            <title>18:31:56: 9.8m @ 2.7 kts ↑ 2° N = 0.24 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="111" y1="760" x2="110" y2="749" stroke="#08f">
            <title>18:32:02: 12.7m @ 4.1 kts ↑ 356° N = 0.24 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="749" x2="110" y2="726" stroke="#0af">
            <title>18:32:12: 26.6m @ 5.2 kts ↑ 0° N = 0.26 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="726" x2="109" y2="707" stroke="#0af">
            <title>18:32:20: 22.7m @ 5.5 kts ↑ 358° N = 0.27 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="109" y1="707" x2="108" y2="690" stroke="#0cf">
            <title>18:32:26: 19.5m @ 6.3 kts ↑ 356° N = 0.28 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="108" y1="690" x2="108" y2="674" stroke="#0cf">
            <title>18:32:32: 19.4m @ 6.3 kts ↑ 0° N = 0.29 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="108" y1="674" x2="109" y2="653" stroke="#0cf">
            <title>18:32:39: 24.2m @ 6.7 kts ↑ 2° N = 0.30 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="109" y1="653" x2="110" y2="629" stroke="#0cf">
            <title>18:32:47: 28.2m @ 6.8 kts ↑ 2° N = 0.32 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="629" x2="110" y2="613" stroke="#0cf">
            <title>18:32:52: 17.7m @ 6.9 kts ↑ 359° N = 0.33 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="110" y1="613" x2="107" y2="598" stroke="#0cf">
            <title>18:32:57: 18.0m @ 7.0 kts ↑ 350° N = 0.34 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="107" y1="598" x2="103" y2="577" stroke="#0cf">
            <title>18:33:05: 25.6m @ 6.2 kts ↑ 350° N = 0.35 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="103" y1="577" x2="99" y2="548" stroke="#0cf">
            <title>18:33:16: 34.1m @ 6.0 kts ↑ 351° N = 0.37 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="99" y1="548" x2="95" y2="518" stroke="#0cf">
            <title>18:33:26: 34.7m @ 6.7 kts ↑ 352° N = 0.39 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="95" y1="518" x2="90" y2="498" stroke="#0af">
            <title>18:33:35: 23.9m @ 5.2 kts ↑ 347° NNW = 0.40 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="90" y1="498" x2="89" y2="488" stroke="#06f">
            <title>18:33:41: 11.9m @ 3.9 kts ↑ 352° N = 0.41 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="89" y1="488" x2="86" y2="470" stroke="#08f">
            <title>18:33:50: 21.6m @ 4.7 kts ↑ 351° N = 0.42 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="86" y1="470" x2="82" y2="448" stroke="#08f">
            <title>18:34:00: 25.7m @ 5.0 kts ↑ 350° N = 0.43 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="82" y1="448" x2="79" y2="428" stroke="#0af">
            <title>18:34:09: 24.2m @ 5.2 kts ↑ 350° N = 0.45 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="79" y1="428" x2="76" y2="413" stroke="#06f">
            <title>18:34:18: 17.3m @ 3.7 kts ↑ 350° N = 0.46 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="76" y1="413" x2="75" y2="401" stroke="#06f">
            <title>18:34:26: 14.7m @ 3.6 kts ↑ 354° N = 0.46 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="75" y1="401" x2="74" y2="388" stroke="#08f">
            <title>18:34:33: 15.5m @ 4.3 kts ↑ 355° N = 0.47 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="74" y1="388" x2="70" y2="364" stroke="#0af">
            <title>18:34:42: 27.5m @ 5.9 kts ↑ 350° N = 0.49 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="70" y1="364" x2="69" y2="362" stroke="#0af">
            <title>18:34:43: 2.6m @ 5.0 kts ↑ 334° NNW = 0.49 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="69" y1="362" x2="66" y2="348" stroke="#08f">
            <title>18:34:50: 16.6m @ 4.6 kts ↑ 347° NNW = 0.50 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="66" y1="348" x2="64" y2="338" stroke="#08f">
            <title>18:34:56: 12.8m @ 4.2 kts ↑ 348° NNW = 0.50 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="64" y1="338" x2="62" y2="328" stroke="#06f">
            <title>18:35:02: 11.2m @ 3.6 kts ↑ 348° NNW = 0.51 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="62" y1="328" x2="61" y2="313" stroke="#08f">
            <title>18:35:09: 17.9m @ 5.0 kts ↑ 357° N = 0.52 nm
    963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </line>
            
        </g>
	
        <g class="segment" id="s1">
            
            <line class="step" x1="61" y1="313" x2="61" y2="293" stroke="#0ef">
            <title>18:35:15 22.7m @ 7.3 kts ↑ 0° N = 986.12 nm
127m/22s @ 7.3/8.9/11.3 kts ↑ 358°/77° &lt; 79° turning (M:0/T:6/S:0)
irons W</title>
            </line>
            
            
            <line class="step" x1="61" y1="293" x2="61" y2="283" stroke="#0ef">
            <title>18:35:18: 11.6m @ 7.5 kts ↑ 358° N = 0.54 nm
    127m/22s @ 7.3/8.9/11.3 kts ↑ 358°/77° turning
    irons W</title>
            </line>
            
            <line class="step" x1="61" y1="283" x2="60" y2="267" stroke="#0ef">
            <title>18:35:23: 19.5m @ 7.6 kts ↑ 359° N = 0.55 nm
    127m/22s @ 7.3/8.9/11.3 kts ↑ 358°/77° turning
    irons W</title>
            </line>
            
            <line class="step" x1="60" y1="267" x2="68" y2="257" stroke="#0fb">
            <title>18:35:26: 14.7m @ 9.5 kts ↑ 38° NE = 0.56 nm
    127m/22s @ 7.3/8.9/11.3 kts ↑ 358°/77° turning
    irons W</title>
            </line>
            
            <line class="step" x1="68" y1="257" x2="77" y2="254" stroke="#0f3">
            <title>18:35:28: 11.6m @ 11.3 kts ↑ 73° ENE = 0.56 nm
    127m/22s @ 7.3/8.9/11.3 kts ↑ 358°/77° turning
    irons W</title>
            </line>
            
            <line class="step" x1="77" y1="254" x2="114" y2="245" stroke="#0f7">
            <title>18:35:37: 46.7m @ 10.1 kts ↑ 77° ENE = 0.59 nm
    127m/22s @ 7.3/8.9/11.3 kts ↑ 358°/77° turning
    irons W</title>
            </line>
            
        </g>
	
        <g class="segment" id="s2">
            
            <line class="step" x1="114" y1="245" x2="126" y2="241" stroke="#0fb">
            <title>18:35:40 14.1m @ 9.1 kts ↑ 72° ENE = 1104.31 nm
151m/33s @ 6.5/8.2/9.2 kts ↑ 68°/87° &lt; 19° moving (M:6/T:0/S:0)
downwind run W</title>
            </line>
            
            
            <line class="step" x1="126" y1="241" x2="147" y2="239" stroke="#0ff">
            <title>18:35:46: 26.3m @ 8.5 kts ↑ 86° E = 0.61 nm
    151m/33s @ 6.5/8.2/9.2 kts ↑ 68°/87° moving
    downwind run W</title>
            </line>
            
            <line class="step" x1="147" y1="239" x2="167" y2="237" stroke="#0cf">
            <title>18:35:53: 23.5m @ 6.5 kts ↑ 84° E = 0.62 nm
    151m/33s @ 6.5/8.2/9.2 kts ↑ 68°/87° moving
    downwind run W</title>
            </line>
            
            <line class="step" x1="167" y1="237" x2="179" y2="234" stroke="#0ef">
            <title>18:35:57: 15.1m @ 7.3 kts ↑ 76° ENE = 0.63 nm
    151m/33s @ 6.5/8.2/9.2 kts ↑ 68°/87° moving
    downwind run W</title>
            </line>
            
            <line class="step" x1="179" y1="234" x2="201" y2="225" stroke="#0fb">
            <title>18:36:03: 28.4m @ 9.2 kts ↑ 68° ENE = 0.65 nm
    151m/33s @ 6.5/8.2/9.2 kts ↑ 68°/87° moving
    downwind run W</title>
            </line>
            
            <line class="step" x1="201" y1="225" x2="237" y2="223" stroke="#0ff">
            <title>18:36:13: 43.9m @ 8.5 kts ↑ 87° E = 0.67 nm
    151m/33s @ 6.5/8.2/9.2 kts ↑ 68°/87° moving
    downwind run W</title>
            </line>
            
        </g>
	
        <g class="segment" id="s3">
            
            <line class="step" x1="237" y1="223" x2="255" y2="222" stroke="#0af">
            <title>18:36:20 21.4m @ 5.9 kts ↑ 88° E = 1262.85 nm
117m/28s @ 5.1/6.9/9.8 kts ↑ 348°/88° &lt; 100° turning (M:0/T:6/S:0)
irons W</title>
            </line>
            
            
            <line class="step" x1="255" y1="222" x2="276" y2="214" stroke="#0ef">
            <title>18:36:27: 27.1m @ 7.5 kts ↑ 69° ENE = 0.70 nm
    117m/28s @ 5.1/6.9/9.8 kts ↑ 348°/88° turning
    irons W</title>
            </line>
            
            <line class="step" x1="276" y1="214" x2="282" y2="208" stroke="#0fb">
            <title>18:36:29: 10.1m @ 9.8 kts ↑ 50° NE = 0.70 nm
    117m/28s @ 5.1/6.9/9.8 kts ↑ 348°/88° turning
    irons W</title>
            </line>
            
            <line class="step" x1="282" y1="208" x2="284" y2="188" stroke="#0ef">
            <title>18:36:35: 23.5m @ 7.6 kts ↑ 5° N = 0.71 nm
    117m/28s @ 5.1/6.9/9.8 kts ↑ 348°/88° turning
    irons W</title>
            </line>
            
            <line class="step" x1="284" y1="188" x2="281" y2="177" stroke="#0af">
            <title>18:36:40: 13.1m @ 5.1 kts ↑ 348° NNW = 0.72 nm
    117m/28s @ 5.1/6.9/9.8 kts ↑ 348°/88° turning
    irons W</title>
            </line>
            
            <line class="step" x1="281" y1="177" x2="279" y2="158" stroke="#0af">
            <title>18:36:48: 22.1m @ 5.4 kts ↑ 352° N = 0.73 nm
    117m/28s @ 5.1/6.9/9.8 kts ↑ 348°/88° turning
    irons W</title>
            </line>
            
        </g>
	
        <g class="segment" id="s4">
            
            <line class="step" x1="279" y1="158" x2="277" y2="137" stroke="#0af">
            <title>18:36:57 25.2m @ 5.4 kts ↑ 356° N = 1384.11 nm
101m/32s @ 3.7/4.8/5.6 kts ↑ 345°/356° &lt; 11° moving (M:6/T:0/S:0)
beam reach port W</title>
            </line>
            
            
            <line class="step" x1="277" y1="137" x2="276" y2="122" stroke="#08f">
            <title>18:37:04: 17.9m @ 5.0 kts ↑ 354° N = 0.76 nm
    101m/32s @ 3.7/4.8/5.6 kts ↑ 345°/356° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="276" y1="122" x2="274" y2="108" stroke="#08f">
            <title>18:37:11: 16.4m @ 4.5 kts ↑ 351° N = 0.77 nm
    101m/32s @ 3.7/4.8/5.6 kts ↑ 345°/356° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="274" y1="108" x2="271" y2="93" stroke="#0af">
            <title>18:37:17: 17.2m @ 5.6 kts ↑ 346° NNW = 0.78 nm
    101m/32s @ 3.7/4.8/5.6 kts ↑ 345°/356° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="271" y1="93" x2="268" y2="84" stroke="#08f">
            <title>18:37:22: 11.1m @ 4.3 kts ↑ 345° NNW = 0.78 nm
    101m/32s @ 3.7/4.8/5.6 kts ↑ 345°/356° moving
    beam reach port W</title>
            </line>
            
            <line class="step" x1="268" y1="84" x2="266" y2="73" stroke="#06f">
            <title>18:37:29: 13.4m @ 3.7 kts ↑ 349° N = 0.79 nm
    101m/32s @ 3.7/4.8/5.6 kts ↑ 345°/356° moving
    beam reach port W</title>
            </line>
            
        </g>
	
        <g class="segment" id="s5">
            
            <line class="step" x1="266" y1="73" x2="264" y2="55" stroke="#0cf">
            <title>18:37:35 20.5m @ 6.6 kts ↑ 354° N = 1480.65 nm
134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° &lt; 139° turning (M:0/T:8/S:0)
tack port to starboard W</title>
            </line>
            
            
            <line class="step" x1="264" y1="55" x2="260" y2="24" stroke="#0ef">
            <title>18:37:44: 37.0m @ 8.0 kts ↑ 351° N = 0.82 nm
    134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° turning
    tack port to starboard W</title>
            </line>
            
            <line class="step" x1="260" y1="24" x2="257" y2="20" stroke="#06f">
            <title>18:37:47: 6.1m @ 4.0 kts ↑ 327° NNW = 0.82 nm
    134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° turning
    tack port to starboard W</title>
            </line>
            
            <line class="step" x1="257" y1="20" x2="252" y2="21" stroke="#02f">
            <title>18:37:54: 5.9m @ 1.6 kts ↑ 254° WSW = 0.83 nm
    134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° turning
    tack port to starboard W</title>
            </line>
            
            <line class="step" x1="252" y1="21" x2="247" y2="25" stroke="#06f">
            <title>18:37:59: 8.0m @ 3.1 kts ↑ 234° SW = 0.83 nm
    134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° turning
    tack port to starboard W</title>
            </line>
            
            <line class="step" x1="247" y1="25" x2="235" y2="33" stroke="#08f">
            <title>18:38:06: 17.3m @ 4.8 kts ↑ 237° WSW = 0.84 nm
    134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° turning
    tack port to starboard W</title>
            </line>
            
            <line class="step" x1="235" y1="33" x2="222" y2="42" stroke="#0af">
            <title>18:38:12: 18.2m @ 5.9 kts ↑ 235° SW = 0.85 nm
    134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° turning
    tack port to starboard W</title>
            </line>
            
            <line class="step" x1="222" y1="42" x2="212" y2="57" stroke="#0ff">
            <title>18:38:17: 21.3m @ 8.3 kts ↑ 215° SW = 0.86 nm
    134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° turning
    tack port to starboard W</title>
            </line>
            
        </g>
	
        <g class="segment" id="s6">
            
            <line class="step" x1="212" y1="57" x2="214" y2="70" stroke="#0fb">
            <title>18:38:20 15.1m @ 9.8 kts ↑ 174° S = 1609.50 nm
660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° &lt; 37° moving (M:19/T:0/S:0)
beam reach starboard W</title>
            </line>
            
            
            <line class="step" x1="214" y1="70" x2="219" y2="101" stroke="#0f7">
            <title>18:38:27: 36.9m @ 10.2 kts ↑ 169° S = 0.89 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="219" y1="101" x2="220" y2="110" stroke="#0f7">
            <title>18:38:29: 11.0m @ 10.6 kts ↑ 176° S = 0.89 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="220" y1="110" x2="216" y2="142" stroke="#0f7">
            <title>18:38:36: 37.5m @ 10.4 kts ↑ 188° S = 0.92 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="216" y1="142" x2="210" y2="177" stroke="#0f7">
            <title>18:38:44: 41.6m @ 10.1 kts ↑ 189° S = 0.94 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="210" y1="177" x2="206" y2="207" stroke="#0fb">
            <title>18:38:51: 34.6m @ 9.6 kts ↑ 189° S = 0.96 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="206" y1="207" x2="199" y2="248" stroke="#0f7">
            <title>18:39:00: 49.4m @ 10.7 kts ↑ 190° S = 0.98 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="199" y1="248" x2="194" y2="281" stroke="#0f7">
            <title>18:39:07: 39.0m @ 10.8 kts ↑ 188° S = 1.00 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="194" y1="281" x2="196" y2="302" stroke="#0f3">
            <title>18:39:11: 23.6m @ 11.4 kts ↑ 176° S = 1.02 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="196" y1="302" x2="193" y2="341" stroke="#0f3">
            <title>18:39:19: 46.7m @ 11.3 kts ↑ 184° S = 1.04 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="193" y1="341" x2="186" y2="376" stroke="#0f3">
            <title>18:39:26: 41.0m @ 11.4 kts ↑ 192° SSW = 1.06 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="186" y1="376" x2="178" y2="409" stroke="#0fb">
            <title>18:39:34: 40.0m @ 9.7 kts ↑ 194° SSW = 1.09 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="178" y1="409" x2="175" y2="426" stroke="#0fb">
            <title>18:39:38: 20.1m @ 9.8 kts ↑ 193° SSW = 1.10 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="175" y1="426" x2="177" y2="452" stroke="#0f3">
            <title>18:39:43: 30.2m @ 11.7 kts ↑ 174° S = 1.11 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="177" y1="452" x2="184" y2="502" stroke="#0f0">
            <title>18:39:52: 59.1m @ 12.8 kts ↑ 172° S = 1.14 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="184" y1="502" x2="190" y2="549" stroke="#4f0">
            <title>18:40:00: 55.0m @ 13.3 kts ↑ 172° S = 1.17 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="190" y1="549" x2="192" y2="554" stroke="#4f0">
            <title>18:40:01: 6.9m @ 13.3 kts ↑ 162° SSE = 1.18 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="192" y1="554" x2="203" y2="579" stroke="#0f0">
            <title>18:40:06: 31.5m @ 12.2 kts ↑ 157° SSE = 1.20 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
            <line class="step" x1="203" y1="579" x2="214" y2="612" stroke="#0f3">
            <title>18:40:13: 40.7m @ 11.3 kts ↑ 161° SSE = 1.22 nm
    660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </line>
            
        </g>
	
        <g class="segment" id="s7">
            
            <line class="step" x1="214" y1="612" x2="212" y2="630" stroke="#0fb">
            <title>18:40:17 20.5m @ 9.9 kts ↑ 184° S = 2274.76 nm
612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° &lt; 43° moving (M:15/T:2/S:0)
close reach starboard W</title>
            </line>
            
            
            <line class="step" x1="212" y1="630" x2="208" y2="635" stroke="#0ff">
            <title>18:40:19: 8.3m @ 8.0 kts ↑ 221° SW = 1.23 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="208" y1="635" x2="185" y2="662" stroke="#0ff">
            <title>18:40:29: 41.7m @ 8.1 kts ↑ 221° SW = 1.26 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="185" y1="662" x2="169" y2="678" stroke="#0ef">
            <title>18:40:36: 27.5m @ 7.6 kts ↑ 226° SW = 1.27 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="169" y1="678" x2="159" y2="695" stroke="#0ff">
            <title>18:40:41: 22.8m @ 8.9 kts ↑ 211° SSW = 1.28 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="159" y1="695" x2="153" y2="726" stroke="#0f7">
            <title>18:40:48: 37.1m @ 10.3 kts ↑ 191° S = 1.30 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="153" y1="726" x2="147" y2="757" stroke="#0f7">
            <title>18:40:55: 36.4m @ 10.1 kts ↑ 191° S = 1.32 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="147" y1="757" x2="138" y2="789" stroke="#0f7">
            <title>18:41:02: 39.3m @ 10.9 kts ↑ 196° SSW = 1.34 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="138" y1="789" x2="127" y2="827" stroke="#0f3">
            <title>18:41:10: 46.5m @ 11.3 kts ↑ 197° SSW = 1.37 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="127" y1="827" x2="118" y2="858" stroke="#0f3">
            <title>18:41:16: 36.6m @ 11.8 kts ↑ 196° SSW = 1.39 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="118" y1="858" x2="108" y2="892" stroke="#0f3">
            <title>18:41:23: 42.4m @ 11.8 kts ↑ 197° SSW = 1.41 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="108" y1="892" x2="100" y2="929" stroke="#0f0">
            <title>18:41:30: 44.0m @ 12.2 kts ↑ 193° SSW = 1.43 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="100" y1="929" x2="94" y2="956" stroke="#0f7">
            <title>18:41:36: 32.5m @ 10.5 kts ↑ 192° SSW = 1.45 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="94" y1="956" x2="86" y2="989" stroke="#0f3">
            <title>18:41:43: 39.7m @ 11.0 kts ↑ 195° SSW = 1.47 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="86" y1="989" x2="78" y2="1028" stroke="#0f0">
            <title>18:41:50: 46.2m @ 12.8 kts ↑ 192° SSW = 1.50 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="78" y1="1028" x2="74" y2="1067" stroke="#0f0">
            <title>18:41:57: 45.4m @ 12.6 kts ↑ 186° S = 1.52 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
            <line class="step" x1="74" y1="1067" x2="72" y2="1105" stroke="#0f7">
            <title>18:42:05: 44.7m @ 10.8 kts ↑ 183° S = 1.55 nm
    612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </line>
            
        </g>
	
        <g class="segment" id="s8">
            
            <line class="step" x1="72" y1="1105" x2="65" y2="1137" stroke="#0fb">
            <title>18:42:13 38.3m @ 9.3 kts ↑ 193° SSW = 2904.03 nm
115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° &lt; 57° turning (M:2/T:5/S:1)
tack starboard to port W</title>
            </line>
            
            
            <line class="step" x1="65" y1="1137" x2="62" y2="1148" stroke="#0ff">
            <title>18:42:16: 12.9m @ 8.3 kts ↑ 198° SSW = 1.58 nm
    115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° turning
    tack starboard to port W</title>
            </line>
            
            <line class="step" x1="62" y1="1148" x2="56" y2="1157" stroke="#0cf">
            <title>18:42:20: 12.9m @ 6.3 kts ↑ 213° SSW = 1.58 nm
    115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° turning
    tack starboard to port W</title>
            </line>
            
            <line class="step" x1="56" y1="1157" x2="41" y2="1170" stroke="#0af">
            <title>18:42:29: 24.0m @ 5.2 kts ↑ 231° SW = 1.59 nm
    115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° turning
    tack starboard to port W</title>
            </line>
            
            <line class="step" x1="41" y1="1170" x2="29" y2="1174" stroke="#0af">
            <title>18:42:34: 14.6m @ 5.7 kts ↑ 250° WSW = 1.60 nm
    115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° turning
    tack starboard to port W</title>
            </line>
            
            <line class="step" x1="29" y1="1174" x2="22" y2="1175" stroke="#06f">
            <title>18:42:39: 8.7m @ 3.4 kts ↑ 267° W = 1.61 nm
    115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° turning
    tack starboard to port W</title>
            </line>
            
            <line class="step" x1="22" y1="1175" x2="21" y2="1175" stroke="#02f">
            <title>18:42:41: 1.9m @ 1.8 kts ↑ 254° WSW = 1.61 nm
    115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° turning
    tack starboard to port W</title>
            </line>
            
            <line class="step" x1="21" y1="1175" x2="20" y2="1174" stroke="#00f">
            <title>18:42:45: 1.5m @ 0.7 kts ↑ 298° WNW = 1.61 nm
    115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° turning
    tack starboard to port W</title>
            </line>
            
        </g>
	
    </svg>
    <svg id="timeline" x="20" y="100" width="95%" height="50" preserveAspectRatio="none" viewBox="0 0 825 75">
        <!-- Invisible rectangle covering the whole viewport is needed so that mouse events are captured
            by the #timeline element whenever the mouse pointer is anywhere in the viewport -->
        <rect id="background" width="100%" height="100%" fill="transparent"/>
        
            <polygon class="timeline-segment" id="s0" points="0,75 0,51 7,51 15,51 23,54 30,60 39,60 48,60 58,60 68,60 77,60 86,60 96,60 105,63 114,66 123,66 132,69 138,69 150,66 159,69 169,69 176,69 182,63 192,60 200,60 206,57 212,57 219,57 227,57 232,57 237,57 245,57 256,57 266,57 275,60 281,66 290,63 300,63 309,60 318,66 326,66 333,63 342,60 343,60 350,63 356,63 362,66 369,63 369,75"/>
            <rect class="timeline-segment-rect" id="s0" x="0" y="0" width="369" height="75">
            <title>963m/369s @ 2.6/5.2/8.6 kts ↑ 334°/19° moving
    beam reach port W</title>
            </rect>
        
            <polygon class="timeline-segment" id="s1" points="369,75 369,54 372,54 377,54 380,48 382,42 391,45 391,75"/>
            <rect class="timeline-segment-rect" id="s1" x="369" y="0" width="22" height="75">
            <title>127m/22s @ 7.3/8.9/11.3 kts ↑ 358°/77° turning
    irons W</title>
            </rect>
        
            <polygon class="timeline-segment" id="s2" points="391,75 391,48 397,51 404,57 408,54 414,48 424,51 424,75"/>
            <rect class="timeline-segment-rect" id="s2" x="391" y="0" width="33" height="75">
            <title>151m/33s @ 6.5/8.2/9.2 kts ↑ 68°/87° moving
    downwind run W</title>
            </rect>
        
            <polygon class="timeline-segment" id="s3" points="424,75 424,60 431,54 433,48 439,54 444,60 452,60 452,75"/>
            <rect class="timeline-segment-rect" id="s3" x="424" y="0" width="28" height="75">
            <title>117m/28s @ 5.1/6.9/9.8 kts ↑ 348°/88° turning
    irons W</title>
            </rect>
        
            <polygon class="timeline-segment" id="s4" points="452,75 452,60 459,63 466,63 472,60 477,63 484,66 484,75"/>
            <rect class="timeline-segment-rect" id="s4" x="452" y="0" width="32" height="75">
            <title>101m/32s @ 3.7/4.8/5.6 kts ↑ 345°/356° moving
    beam reach port W</title>
            </rect>
        
            <polygon class="timeline-segment" id="s5" points="484,75 484,57 493,54 496,66 503,72 508,66 515,63 521,60 526,51 526,75"/>
            <rect class="timeline-segment-rect" id="s5" x="484" y="0" width="42" height="75">
            <title>134m/42s @ 1.6/5.3/8.3 kts ↑ 215°/354° turning
    tack port to starboard W</title>
            </rect>
        
            <polygon class="timeline-segment" id="s6" points="526,75 526,48 533,45 535,45 542,45 550,45 557,48 566,45 573,45 577,42 585,42 592,42 600,48 604,48 609,42 618,39 626,36 627,36 632,39 639,42 639,75"/>
            <rect class="timeline-segment-rect" id="s6" x="526" y="0" width="113" height="75">
            <title>660m/113s @ 9.6/11.1/13.3 kts ↑ 157°/194° moving
    beam reach starboard W</title>
            </rect>
        
            <polygon class="timeline-segment" id="s7" points="639,75 639,48 641,51 651,51 658,54 663,51 670,45 677,45 684,45 692,42 698,42 705,42 712,39 718,45 725,42 732,39 739,39 747,45 747,75"/>
            <rect class="timeline-segment-rect" id="s7" x="639" y="0" width="108" height="75">
            <title>612m/108s @ 7.6/9.4/12.8 kts ↑ 183°/226° moving
    close reach starboard W</title>
            </rect>
        
            <polygon class="timeline-segment" id="s8" points="747,75 747,48 750,51 754,57 763,60 768,60 773,66 775,72 779,75 779,75"/>
            <rect class="timeline-segment-rect" id="s8" x="747" y="0" width="32" height="75">
            <title>115m/32s @ 5.2/4.3/9.3 kts ↑ 193°/250° turning
    tack starboard to port W</title>
            </rect>
        
    </svg>
    <script>

// Tunable parameters
const zoomSensitivityMouse = 0.001; // Adjust for zoom speed
const zoomSensitivityTouchpad = 0.01; // Adjust for zoom speed
const dragMultiplier = 2.5; // Adjust for drag speed

const root = document.querySelector(&#39;svg#root&#39;);
const map = document.querySelector(&#39;svg#map&#39;);
const legend = document.querySelector(&#39;g#legend&#39;);
const timeline = document.querySelector(&#39;svg#timeline&#39;);

function updatePositions() {
    const {width: rootWidth, height: rootHeight} = root.getBoundingClientRect(); 
    const legendHeight = legend.getBoundingClientRect().height; 
    let mapHeight = map.getBoundingClientRect().height; 
    let timelineHeight = timeline.getBoundingClientRect().height;
    console.log(rootHeight, legendHeight, mapHeight, timelineHeight)
    mapHeight = rootHeight - legendHeight - timelineHeight
    map.setAttribute(&#39;height&#39;, mapHeight)
    timeline.setAttribute(&#39;y&#39;, rootHeight - timelineHeight-20)
    timeline.setAttribute(&#39;width&#39;, rootWidth - 40)
};

updatePositions();

window.addEventListener(&#34;resize&#34;, updatePositions)

// map zooming/panning
const [_minX, _minY, maxX, maxY] = map.getAttribute(&#39;viewBox&#39;).split(&#39; &#39;).map(Number);
let startX, startY, initialDragViewBox;

function clamp(x, max) {
    if (0 &gt; x) return 0;
    if (x &gt; max) return max;
    return x
}

function dragStart(event) {
    map.style.cursor = &#39;grabbing&#39;;
    startX = event.clientX;
    startY = event.clientY;
    initialDragViewBox = map.getAttribute(&#39;viewBox&#39;).split(&#39; &#39;).map(Number);
    map.addEventListener(&#39;mousemove&#39;, dragMove);

};

function dragMove(event) {
    const deltaX = event.clientX - startX;
    const deltaY = event.clientY - startY;

    // Adjust the viewBox based on the mouse movement
    const newMinX = clamp(initialDragViewBox[0] - deltaX*dragMultiplier, maxX);
    const newMinY = clamp(initialDragViewBox[1] - deltaY*dragMultiplier, maxY);

    map.setAttribute(&#39;viewBox&#39;, `${newMinX} ${newMinY} ${initialDragViewBox[2]} ${initialDragViewBox[3]}`);
};

function dragStop() {
    map.removeEventListener(&#39;mousemove&#39;, dragMove);
    map.style.cursor = &#39;auto&#39;;
};

function zoomSensitivity(event) {
    // Check if deltaX or deltaY are very small and non-zero, which is typical for touchpads
    if (1 &gt; Math.abs(event.deltaY) || 1 &gt; Math.abs(event.deltaX)) {
        return zoomSensitivityTouchpad;
    } else {
        return zoomSensitivityMouse;
    }
}

function wheelZoom(event) {
    event.preventDefault(); // Prevent default scrolling

    const delta = -event.deltaY * zoomSensitivity(event); // Normalize scroll direction and sensitivity

    let [minX, minY, width, height] = map.getAttribute(&#39;viewBox&#39;).split(&#39; &#39;).map(Number);

    // Calculate the point to zoom around (mouse position relative to SVG)
    const rect = map.getBoundingClientRect();
    const mouseX = event.clientX - rect.left;
    const mouseY = event.clientY - rect.top;

    // Calculate the focal point in the SVG&#39;s user coordinates
    const focusX = minX + width * (mouseX / rect.width);
    const focusY = minY + height * (mouseY / rect.height);

    // Adjust width and height based on zoom delta
    const newWidth = clamp(width * (1 + delta), maxX);
    const newHeight = clamp(height * (1 + delta), maxY);

    // Ensure width and height don&#39;t become zero or negative
    if (0 == newWidth || 0 == newHeight) return;

    // Adjust minX and minY to zoom around the focal point
    const newMinX = clamp(focusX - (mouseX / rect.width) * newWidth, maxX);
    const newMinY = clamp(focusY - (mouseY / rect.height) * newHeight, maxY);

    map.setAttribute(&#39;viewBox&#39;, `${newMinX} ${newMinY} ${newWidth} ${newHeight}`);
};

map.addEventListener(&#39;mousedown&#39;, dragStart);
map.addEventListener(&#39;mouseup&#39;, dragStop);
map.addEventListener(&#39;mouseleave&#39;, dragStop);
map.addEventListener(&#39;wheel&#39;, wheelZoom , { passive: false }); // passive: false is needed to preventDefault

function getMapSegmentId(event) {
    const target = event.target
    if(!target) return undefined
    if(target.tagName != &#39;line&#39;) return undefined
    const id = event.target.parentNode.getAttribute(&#34;id&#34;)
    console.log(&#34;segment=&#34;, id)
    return id
}

function mapSegmentHoverStart(event) {
    const id = getMapSegmentId(event)
    if (!id) return
    const selector = `rect#${id}`
    const timelineSegment = timeline.querySelector(selector)
    if (!timelineSegment) return
    timelineSegment.classList.add(&#34;timeline-segment-rect-hovered&#34;)
}

function mapSegmentHoverStop(event) {
    const id = getMapSegmentId(event)
    if (!id) return
    const selector = `rect#${id}`
    const timelineSegment = timeline.querySelector(selector)
    if (!timelineSegment) return
    timelineSegment.classList.remove(&#34;timeline-segment-rect-hovered&#34;)
}

map.addEventListener(&#39;mouseover&#39;, mapSegmentHoverStart)
map.addEventListener(&#39;mouseout&#39;, mapSegmentHoverStop)

// timeline hover handling
function getTimelineSegmentId(event) {
    const target = event.target
    if(!target) return undefined
    if(target.tagName != &#39;rect&#39; &amp;&amp; target.tagName != &#39;polygon&#39;) return undefined
    const id = event.target.getAttribute(&#34;id&#34;)
    return id
}

function segmentHoverStart(event) {
    const id = getTimelineSegmentId(event)
    if (!id) return
    const selector = `g#${id}.segment`
    const mapSegment = map.querySelector(selector)
    if (!mapSegment) return
    mapSegment.classList.add(&#34;segment-hovered&#34;)
}

function segmentHoverStop(event) {
    const id = getTimelineSegmentId(event)
    if (!id) return
    const mapSegment = map.querySelector(`g#${id}.segment`)
    if (!mapSegment) return
    mapSegment.classList.remove(&#34;segment-hovered&#34;)
}

timeline.addEventListener(&#39;mouseover&#39;, segmentHoverStart)
timeline.addEventListener(&#39;mouseout&#39;, segmentHoverStop)
    </script>
</svg>
